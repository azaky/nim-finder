function loadData(e){allData[e]||$.ajax({dataType:"json",url:"./data/"+e+".json",async:!0,success:function(t){allData[e]=t}})}var filter={},allData={},maxResult=100;$(function(){function e(e){for(var t=0;t<e.length;t++)if(e[t].length)return!1;return!0}function t(e,t){for(var a=0,n=0;n<t.length;n++)t[n].length?e.indexOf(t[n])>=0&&a++:a++;return a==t.length}function a(a){return splitted=a.toLowerCase().split(" "),e(splitted)?($("#search-info").html(""),void $("#search-result-box").html("")):(result=[],$.each(filter,function(e,a){return a&&allData[e]&&$.each(allData[e],function(a,n){if(allData[e][a].combined||(allData[e][a].combined=(n.nim+" "+n.name).toLowerCase()),t(allData[e][a].combined,splitted)){if(!(result.length<maxResult))return!1;result.push(n)}}),result.length>=maxResult?!1:void 0}),searchResultDom=$("#search-result-box"),searchResultDom.html(""),$.each(result,function(e,t){var a='<div class="col-md-3 search-result"><a href="javascript:void(0)" class="btn btn-material-green btn-raised btn-block"><h5><strong>'+t.nim+"</strong></h5><h5>"+t.name+"</h5></a></div>";searchResultDom.append(a)}),void $("#search-info").html("Showing "+result.length+" results for <strong>"+a+"</strong>"))}var n;$.ajax({dataType:"json",url:"./data/faculties.json",success:function(e){n=e,select=$("#filter-select"),$.each(n,function(e,t){optgroup='<optgroup label="'+t.name+'">',$.each(t.programs,function(e,t){optgroup+='<option value="'+t.code+'">'+t.code+" | "+t.name+"</option>"}),optgroup+="</optgroup>",select.append(optgroup)}),Cookies("nf_filter")&&(s=JSON.parse(Cookies("nf_filter")),s&&$.each(s,function(e,t){$('#filter-select option[value="'+t+'"]').prop("selected",!0),loadData(t),filter[t]=!0})),select.chosen({placeholder_text_multiple:" ",search_contains:!0})}}),$("#search-query").on("keydown keyup",function(){a($(this).val())}),$("#filter-select").on("change",function(){s=$(this).val(),filter={},s&&$.each(s,function(e,t){filter[t]=!0,loadData(t)}),Cookies.set("nf_filter",JSON.stringify(s),{expires:1/0}),a($("#search-query").val())})});