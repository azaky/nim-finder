function loadData(t){allData[t]||$.ajax({dataType:"json",url:"./data/"+t+".json",async:!0,success:function(e){allData[t]=e}})}var filter={},allData={},maxResult=100;$(function(){function t(t){for(var e=0;e<t.length;e++)if(t[e].length)return!1;return!0}function e(t,e){for(var a=0,l=0;l<e.length;l++)e[l].length?t.indexOf(e[l])>=0&&a++:a++;return a==e.length}function a(a){return splitted=a.split(" "),t(splitted)?($("#search-info").html(""),void $("#search-result-box").html("")):(result=[],$.each(filter,function(t,a){return a&&allData[t]&&$.each(allData[t],function(a,l){if(allData[t][a].combined||(allData[t][a].combined=(l.nim+" "+l.name).toLowerCase()),e(allData[t][a].combined,splitted)){if(!(result.length<maxResult))return!1;result.push(l)}}),result.length>=maxResult?!1:void 0}),searchResultDom=$("#search-result-box"),searchResultDom.html(""),$.each(result,function(t,e){var a='<div class="col-md-3 search-result"><a href="javascript:void(0)" class="btn btn-material-green btn-raised btn-block"><h5><strong>'+e.nim+"</strong></h5><h5>"+e.name+"</h5></a></div>";searchResultDom.append(a)}),void $("#search-info").html("Showing "+result.length+" results for <strong>"+a+"</strong>"))}var l;$.ajax({dataType:"json",url:"./data/faculties.json",success:function(t){l=t,select=$("#filter-select"),$.each(l,function(t,e){optgroup='<optgroup label="'+e.name+'">',$.each(e.programs,function(t,e){optgroup+='<option value="'+e.code+'">'+e.code+" | "+e.name+"</option>"}),optgroup+="</optgroup>",select.append(optgroup)}),Cookies("nf_filter")&&(s=JSON.parse(Cookies("nf_filter")),s&&$.each(s,function(t,e){$('#filter-select option[value="'+e+'"]').prop("selected",!0),loadData(e),filter[e]=!0})),select.chosen({placeholder_text_multiple:" ",search_contains:!0})}}),$("#filter-select").on("change",function(){s=$(this).val(),filter={},s&&$.each(s,function(t,e){filter[e]=!0,loadData(e)}),Cookies.set("nf_filter",JSON.stringify(s),{expires:1/0})}),$("body").on("change",".filter-faculty-checkbox",function(){$(this).is(":checked")?(filter[$(this).data("faculty")]=!0,loadData($(this).data("faculty"))):filter[$(this).data("faculty")]=void 0,updateFilter()}),$("#search-query").on("keydown keyup",function(){a($(this).val())})});